<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music Notation Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'mono': ['Monaco', 'Menlo', 'Ubuntu Mono', 'monospace'],
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50 text-gray-900 leading-relaxed">
  <div class="flex h-screen overflow-hidden">
    <!-- Left Sidebar for Saved Notations and Examples -->
    <div class="w-80 bg-white border-r border-gray-200 shadow-sm flex flex-col">
      <div class="p-4 border-b border-gray-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-3">Library</h2>
        <button id="save-notation-btn" class="w-full inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-md font-medium text-sm cursor-pointer border-0 transition-all duration-200 bg-blue-500 text-white hover:bg-blue-600">
          <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Save Current Notation
        </button>
      </div>
      
      <!-- Tab Navigation -->
      <div class="flex border-b border-gray-200 bg-gray-50">
        <button id="saved-tab" class="flex-1 py-3 px-2 border-0 bg-transparent text-gray-500 font-medium text-sm cursor-pointer transition-all duration-200 border-b-2 border-transparent hover:bg-blue-50 hover:text-blue-500 text-blue-500 border-b-blue-500 bg-white">Saved</button>
        <button id="examples-tab" class="flex-1 py-3 px-2 border-0 bg-transparent text-gray-500 font-medium text-sm cursor-pointer transition-all duration-200 border-b-2 border-transparent hover:bg-blue-50 hover:text-blue-500">Examples</button>
        <button id="text-examples-tab" class="flex-1 py-3 px-2 border-0 bg-transparent text-gray-500 font-medium text-sm cursor-pointer transition-all duration-200 border-b-2 border-transparent hover:bg-blue-50 hover:text-blue-500">Text Examples</button>
      </div>
      
      <div class="flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-track-slate-100 scrollbar-thumb-slate-300 scrollbar-thumb-rounded-full hover:scrollbar-thumb-slate-400">
        <!-- Saved Notations Tab -->
        <div id="saved-content" class="block">
          <div id="saved-notations-list">
            <div class="text-gray-500 text-sm text-center py-8 px-4">No saved notations yet</div>
          </div>
        </div>
        
        <!-- Examples Tab -->
        <div id="examples-content" class="hidden">
          <div class="flex flex-col gap-3">
            <button class="example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-pattern="// Main Georgian-inspired melody (violin/duduk sound)
violin:,,D5.0.5,E5.0.5|F5.1.5,E5.0.5,D5.1,A4.1|C5.1.5,D5.0.5,C5.1,A4.1|
G4.1.5,A4.0.5,Bb4.1,C5.1|D5.2,A4.2|F5.1.5,E5.0.5,D5.1,E5.1|F5.1,G5.0.5,F5.0.5,E5.1,D5.1|
C5.1.5,D5.0.5,C5.1,A4.1|G4.1.5,A4.0.5,Bb4.1,G4.1|A4.3,A4.0.5,Bb4.0.5|
C5.1,D5.1,C5.1,A4.1|G4.1.5,A4.0.5,Bb4.1,C5.1|D5.2,F5.0.5,E5.0.5,D5.0.5,C5.0.5|
D5.1.5,C5.0.5,A4.1,G4.1|A4.3,,;

// Panduri/chonguri accompaniment (plucked string sound)
panduri:D4.0.25,A4.0.25,D5.0.25,A4.0.25,D4.0.25,A4.0.25,D5.0.25,A4.0.25|
D4.0.25,A4.0.25,D5.0.25,A4.0.25,D4.0.25,A4.0.25,D5.0.25,A4.0.25|
F4.0.25,A4.0.25,C5.0.25,A4.0.25,F4.0.25,A4.0.25,C5.0.25,A4.0.25|
G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25,G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25|
D4.0.25,A4.0.25,D5.0.25,A4.0.25,D4.0.25,A4.0.25,D5.0.25,A4.0.25|
D4.0.25,A4.0.25,D5.0.25,A4.0.25,D4.0.25,A4.0.25,D5.0.25,A4.0.25|
F4.0.25,A4.0.25,C5.0.25,A4.0.25,F4.0.25,A4.0.25,C5.0.25,A4.0.25|
F4.0.25,A4.0.25,C5.0.25,A4.0.25,F4.0.25,A4.0.25,C5.0.25,A4.0.25|
G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25,G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25|
A4.0.25,C5.0.25,E5.0.25,C5.0.25,A4.0.25,C5.0.25,E5.0.25,C5.0.25|
F4.0.25,A4.0.25,C5.0.25,A4.0.25,F4.0.25,A4.0.25,C5.0.25,A4.0.25|
G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25,G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25|
D4.0.25,A4.0.25,D5.0.25,A4.0.25,D4.0.25,A4.0.25,D5.0.25,A4.0.25|
G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25,G4.0.25,Bb4.0.25,D5.0.25,Bb4.0.25|
A4.0.25,C5.0.25,E5.0.25,C5.0.25,A4.0.25,C5.0.25,E5.0.25,C5.0.25;

// Bass drone (traditional bass sound)
bass:D3.4|D3.4|F3.2,F3.2|G3.2,G3.2|D3.4|D3.4|F3.2,F3.2|F3.2,F3.2|
G3.2,G3.2|A3.2,A3.2|F3.2,F3.2|G3.2,G3.2|D3.2,D3.2|G3.2,G3.2|A3.4;

// Percussion (frame drum/doli)
drums:,,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|
d.1,d.0.5,d.0.5,d.1,d.0.5,d.0.5|d.1,d.1,d.1,d.1;

// Vocal/choir melody (traditional polyphony)
choir:,,,,|,,,,|,,,,|,,,,|
A4.1+D5.1,A4.1+D5.1,A4.1+D5.1,A4.1+D5.1|A4.1+D5.1,A4.1+D5.1,A4.1+D5.1,A4.1+D5.1|
A4.1+C5.1,A4.1+C5.1,A4.1+C5.1,A4.1+C5.1|A4.1+C5.1,A4.1+C5.1,A4.1+C5.1,A4.1+C5.1|
G4.1+Bb4.1,G4.1+Bb4.1,G4.1+Bb4.1,G4.1+Bb4.1|A4.1+C5.1,A4.1+C5.1,A4.1+C5.1,A4.1+C5.1|
A4.1+C5.1,A4.1+C5.1,A4.1+C5.1,A4.1+C5.1|G4.1+Bb4.1,G4.1+Bb4.1,G4.1+Bb4.1,G4.1+Bb4.1|
F#4.1+A4.1+D5.1,F#4.1+A4.1+D5.1,F#4.1+A4.1+D5.1,F#4.1+A4.1+D5.1|G4.1+Bb4.1+D5.1,G4.1+Bb4.1+D5.1,A4.1+C5.1+E5.1,A4.1+C5.1+E5.1;">
              <div class="font-semibold text-gray-800 text-sm mb-1">Georgian Folk</div>
              <div class="text-xs text-gray-500 leading-tight">Traditional Georgian polyphonic music</div>
            </button>
            
            <button class="example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-pattern="piano:C4.0.5+E4.0.5+G4.0.5,C4.0.5+F4.0.5+A4.0.5,C4.0.5+E4.0.5+G4.0.5,C4.0.5+F4.0.5+A4.0.5;drums:k.0.5,h.0.25+s.0.5,k.0.5,h.0.25+s.0.5;">
              <div class="font-semibold text-gray-800 text-sm mb-1">Simple Pop</div>
              <div class="text-xs text-gray-500 leading-tight">Basic pop chord progression with drums</div>
            </button>
            
            <button class="example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-pattern="piano:C4.0.25,E4.0.25,G4.0.25,C5.0.25|D4.0.25,F4.0.25,A4.0.25,D5.0.25;bass:C2.1|D2.1;drums:k.0.25,h.0.25,s.0.25,h.0.25|k.0.25,h.0.25,s.0.25,h.0.25;">
              <div class="font-semibold text-gray-800 text-sm mb-1">Arpeggiated</div>
              <div class="text-xs text-gray-500 leading-tight">Fast arpeggiated piano pattern</div>
            </button>
            
            <button class="example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-pattern="violin:B4.1,B4.1,C5.1,D5.1|D5.1,C5.1,B4.1,A4.1|G4.1,G4.1,A4.1,B4.1|B4.1.5,A4.0.5,A4.2|
B4.1,B4.1,C5.1,D5.1|D5.1,C5.1,B4.1,A4.1|G4.1,G4.1,A4.1,B4.1|A4.1.5,G4.0.5,G4.2|
A4.1,A4.1,B4.1,G4.1|A4.1,B4.0.5,C5.0.5,B4.1,G4.1|A4.1,B4.0.5,C5.0.5,B4.1,A4.1|G4.1,A4.1,D4.2|
B4.1,B4.1,C5.1,D5.1|D5.1,C5.1,B4.1,A4.1|G4.1,G4.1,A4.1,B4.1|A4.1.5,G4.0.5,G4.2;

piano:G3.0.5+D4.0.5,G3.0.5+D4.0.5,A3.0.5+E4.0.5,B3.0.5+F#4.0.5|B3.0.5+F#4.0.5,A3.0.5+E4.0.5,G3.0.5+D4.0.5,D3.0.5+A3.0.5|
G3.0.5+B3.0.5,G3.0.5+B3.0.5,D3.0.5+A3.0.5,G3.0.5+B3.0.5|G3.0.5+B3.0.5,D3.0.5+A3.0.5,D3.0.5+A3.0.5,D3.0.5+A3.0.5|
G3.0.5+D4.0.5,G3.0.5+D4.0.5,A3.0.5+E4.0.5,B3.0.5+F#4.0.5|B3.0.5+F#4.0.5,A3.0.5+E4.0.5,G3.0.5+D4.0.5,D3.0.5+A3.0.5|
G3.0.5+B3.0.5,G3.0.5+B3.0.5,D3.0.5+A3.0.5,G3.0.5+B3.0.5|D3.0.5+A3.0.5,B2.0.5+G3.0.5,G2.0.5+G3.0.5,G2.0.5+G3.0.5|
F#3.0.5+A3.0.5,F#3.0.5+A3.0.5,G3.0.5+B3.0.5,G3.0.5+D4.0.5|F#3.0.5+A3.0.5,G3.0.5+B3.0.5,A3.0.5+C4.0.5,G3.0.5+B3.0.5|
F#3.0.5+A3.0.5,G3.0.5+B3.0.5,A3.0.5+C4.0.5,G3.0.5+B3.0.5,F#3.0.5+A3.0.5|G3.0.5+B3.0.5,D3.0.5+A3.0.5,D3.1+F#3.1|
G3.0.5+D4.0.5,G3.0.5+D4.0.5,A3.0.5+E4.0.5,B3.0.5+F#4.0.5|B3.0.5+F#4.0.5,A3.0.5+E4.0.5,G3.0.5+D4.0.5,D3.0.5+A3.0.5|
G3.0.5+B3.0.5,G3.0.5+B3.0.5,D3.0.5+A3.0.5,G3.0.5+B3.0.5|D3.0.5+A3.0.5,B2.0.5+G3.0.5,G2.0.5+G3.0.5,G2.0.5+B3.0.5;

bass:G2.2,D2.2|G2.2,D2.2|G2.2,D2.2|G2.2,G1.2|G2.2,D2.2|G2.2,D2.2|G2.2,D2.2|D2.2,G1.2|
D2.2,G2.2|D2.2,G2.2|D2.2,F#2.2|G2.2,D2.2|G2.2,D2.2|G2.2,D2.2|G2.2,D2.2|D2.2,G1.2;

timpani:D2.0.5,,,,D2.0.5,D2.0.5|,,,,|,,,,|,,,D2.2|D2.0.5,,,,D2.0.5,D2.0.5|,,,,|,,,,|,,,G1.2|
,,,,|,,,,|,,,,|,,D2.0.5,D2.0.5,D2.1|D2.0.5,,,,D2.0.5,D2.0.5|,,,,|,,,,|D2.0.5,D2.0.5,D2.0.5,D2.0.5,G1.2;">
              <div class="font-semibold text-gray-800 text-sm mb-1">Beethoven</div>
              <div class="text-xs text-gray-500 leading-tight">Classical orchestral composition</div>
            </button>
            
            <button class="example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-pattern="tempo:125;
lead:F#5.0.5,D5.0.5,Bb4.1,C5.0.5,A4.0.5|D5.0.5,Bb4.0.5,C5.0.5,A4.0.5,F#4.1|
F#5.0.5,D5.0.5,Bb4.1,C5.0.5,A4.0.5|D5.0.5,Bb4.0.5,C5.1,A4.1|
G5.0.5,E5.0.5,C5.1,D5.0.5,B4.0.5|E5.0.5,C5.0.5,D5.0.5,B4.0.5,G4.1|
G5.0.5,E5.0.5,C5.1,D5.0.5,B4.0.5|E5.0.5,C5.0.5,D5.1,B4.1;

synth:D4.1+F#4.1+A4.1,D4.1+F#4.1+A4.1|C4.1+E4.1+G4.1,C4.1+E4.1+G4.1|
Bb3.1+D4.1+F4.1,Bb3.1+D4.1+F4.1|A3.1+C4.1+E4.1,A3.1+C4.1+E4.1|
G3.1+B3.1+D4.1,G3.1+B3.1+D4.1|F3.1+A3.1+C4.1,F3.1+A3.1+C4.1|
E3.1+G3.1+B3.1,E3.1+G3.1+B3.1|D3.1+F#3.1+A3.1,D3.1+F#3.1+A3.1;

brass:,,,|,,,|D4.2+F#4.2+A4.2|C4.2+E4.2+G4.2|
,,,|,,,|G4.2+B4.2+D5.2|F#4.2+A4.2+C5.2;

bass:D2.1,D2.0.5,D2.0.5|C2.1,C2.0.5,C2.0.5|
Bb1.1,Bb1.0.5,Bb1.0.5|A1.1,A1.0.5,A1.0.5|
G1.1,G1.0.5,G1.0.5|F1.1,F1.0.5,F1.0.5|
E1.1,E1.0.5,E1.0.5|D1.1,D1.0.5,D1.0.5;

drums:k.0.5,s.0.5,k.0.5,s.0.5|k.0.5,s.0.5,k.0.25,k.0.25,s.0.5|
k.0.5,s.0.5,k.0.5,s.0.5|k.0.5,s.0.5,k.0.25,k.0.25,s.0.5|
k.0.5,s.0.5,k.0.5,s.0.5|k.0.5,s.0.5,k.0.25,k.0.25,s.0.5|
k.0.5,s.0.5,k.0.5,s.0.5|k.0.5,s.0.5,c.1;">
              <div class="font-semibold text-gray-800 text-sm mb-1">Countdown Rock</div>
              <div class="text-xs text-gray-500 leading-tight">Epic rock anthem with full band</div>
            </button>
          </div>
        </div>
        
        <!-- Text Examples Tab -->
        <div id="text-examples-content" class="hidden">
          <div class="flex flex-col gap-3">
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="Hello world! This is beautiful music." data-style="melodic" data-scale="major">
              <div class="font-semibold text-gray-800 text-sm mb-1">Simple Greeting</div>
              <div class="text-xs text-gray-500 leading-tight">Melodic major scale conversion</div>
            </button>
            
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="The quick brown fox jumps over the lazy dog." data-style="rhythmic" data-scale="pentatonic">
              <div class="font-semibold text-gray-800 text-sm mb-1">Classic Phrase</div>
              <div class="text-xs text-gray-500 leading-tight">Rhythmic pentatonic style</div>
            </button>
            
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="Music is the universal language of mankind." data-style="harmonic" data-scale="minor">
              <div class="font-semibold text-gray-800 text-sm mb-1">Poetic Quote</div>
              <div class="text-xs text-gray-500 leading-tight">Harmonic minor composition</div>
            </button>
            
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="Jazz, blues, rock, and classical music." data-style="melodic" data-scale="chromatic">
              <div class="font-semibold text-gray-800 text-sm mb-1">Music Genres</div>
              <div class="text-xs text-gray-500 leading-tight">Chromatic melodic interpretation</div>
            </button>
            
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="In the beginning was silence. Then came sound." data-style="ambient" data-scale="minor">
              <div class="font-semibold text-gray-800 text-sm mb-1">Philosophical</div>
              <div class="text-xs text-gray-500 leading-tight">Ambient minor soundscape</div>
            </button>
            
            <button class="text-example-item bg-gray-50 border border-gray-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-gray-100 hover:border-blue-500 hover:-translate-y-0.5 hover:shadow-md" data-text="Dance like nobody's watching!" data-style="rhythmic" data-scale="major">
              <div class="font-semibold text-gray-800 text-sm mb-1">Motivational</div>
              <div class="text-xs text-gray-500 leading-tight">Upbeat rhythmic major</div>
            </button>
            
            <!-- LangChain-optimized examples -->
            <div class="border-t border-gray-200 pt-3 mt-3">
              <div class="text-xs font-medium text-blue-600 mb-2">ðŸ¤– AI-Optimized Prompts</div>
            </div>
            
            <button class="text-example-item bg-blue-50 border border-blue-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-blue-100 hover:border-blue-400 hover:-translate-y-0.5 hover:shadow-md" data-text="Create a triumphant melody that builds to an epic crescendo, like a hero's journey reaching its victorious conclusion." data-style="harmonic" data-scale="major">
              <div class="font-semibold text-blue-800 text-sm mb-1">Epic Journey</div>
              <div class="text-xs text-blue-600 leading-tight">Cinematic orchestral composition</div>
            </button>
            
            <button class="text-example-item bg-blue-50 border border-blue-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-blue-100 hover:border-blue-400 hover:-translate-y-0.5 hover:shadow-md" data-text="Compose a gentle lullaby that flows like a peaceful river under moonlight, soft and dreamy." data-style="ambient" data-scale="pentatonic">
              <div class="font-semibold text-blue-800 text-sm mb-1">Moonlit Lullaby</div>
              <div class="text-xs text-blue-600 leading-tight">Ethereal ambient soundscape</div>
            </button>
            
            <button class="text-example-item bg-blue-50 border border-blue-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-blue-100 hover:border-blue-400 hover:-translate-y-0.5 hover:shadow-md" data-text="Write an energetic jazz piece with syncopated rhythms that makes you want to snap your fingers and tap your feet." data-style="rhythmic" data-scale="chromatic">
              <div class="font-semibold text-blue-800 text-sm mb-1">Swing Time</div>
              <div class="text-xs text-blue-600 leading-tight">Jazzy syncopated rhythms</div>
            </button>
            
            <button class="text-example-item bg-blue-50 border border-blue-200 rounded-md p-4 cursor-pointer transition-all duration-200 text-left hover:bg-blue-100 hover:border-blue-400 hover:-translate-y-0.5 hover:shadow-md" data-text="Imagine the sound of rain falling on leaves while birds sing their morning songs in a mystical forest." data-style="ambient" data-scale="minor">
              <div class="font-semibold text-blue-800 text-sm mb-1">Forest Rain</div>
              <div class="text-xs text-blue-600 leading-tight">Natural ambient textures</div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col bg-white">
      <!-- Header -->
      <div class="bg-white border-b border-gray-200 p-4">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div>
            <h1 class="text-2xl font-bold text-gray-900 mb-1">Vibe Codesitor</h1>
            <p class="text-sm text-gray-500">Create music with simple notation</p>
          </div>
          <div class="flex items-center gap-2">
            <label for="tempo" class="text-sm font-medium text-gray-700">Tempo:</label>
            <input 
              type="number" 
              id="tempo" 
              value="120" 
              min="60" 
              max="200" 
              class="w-20 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
            <span class="text-sm text-gray-500">BPM</span>
          </div>
        </div>
      </div>

      <!-- Editor Section -->
      <div class="flex-1 flex flex-col p-6">
        <!-- Input Mode Toggle -->
        <div class="flex gap-2 mb-4">
          <button id="notation-mode-btn" class="px-4 py-2 rounded-md text-sm font-medium bg-blue-500 text-white hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">Notation Mode</button>
          <button id="text-mode-btn" class="px-4 py-2 rounded-md text-sm font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">Text Mode</button>
        </div>

        <!-- Text-to-Music Settings (hidden by default) -->
        <div id="text-settings" class="mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg" style="display: none;">
          <h3 class="text-sm font-semibold text-gray-800 mb-3">Text-to-Music Settings:</h3>
          
          <!-- AI Toggle -->
          <div class="mb-4 p-3 bg-white border border-blue-200 rounded-md">
            <div class="flex items-center justify-between mb-2">
              <label class="flex items-center gap-2">
                <input type="checkbox" id="langchain-enabled" class="form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500">
                <span class="text-sm font-medium text-gray-800">ðŸ¤– AI-Powered Generation</span>
              </label>
              <span class="text-xs text-gray-500" id="langchain-status">Rule-based</span>
            </div>
            <div class="text-xs text-gray-600">Use AI to create more sophisticated music from your text prompts</div>
          </div>

          <!-- AI Settings Panel (hidden by default) -->
          <div id="langchain-settings" class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md" style="display: none;">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">AI Provider:</label>
                <select id="provider-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="openai">OpenAI</option>
                  <option value="gemini">Google Gemini</option>
                </select>
              </div>
              <div id="openai-key-container">
                <label class="block text-xs font-medium text-gray-700 mb-1">OpenAI API Key:</label>
                <input type="password" id="openai-key" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="sk-...">
                <div class="text-xs text-gray-500 mt-1">OpenAI API key (stored locally)</div>
              </div>
              <div id="gemini-key-container" style="display: none;">
                <label class="block text-xs font-medium text-gray-700 mb-1">Gemini API Key:</label>
                <input type="password" id="gemini-key" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="AIza...">
                <div class="text-xs text-gray-500 mt-1">Google AI API key (stored locally)</div>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">AI Model:</label>
                <select id="model-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <!-- OpenAI models -->
                  <option value="gpt-3.5-turbo" data-provider="openai">GPT-3.5 Turbo</option>
                  <option value="gpt-4" data-provider="openai">GPT-4</option>
                  <option value="gpt-4-turbo" data-provider="openai">GPT-4 Turbo</option>
                  <!-- Gemini models -->
                  <option value="gemini-2.0-flash-exp" data-provider="gemini">Gemini 2.0 Flash (Experimental)</option>
                  <option value="gemini-1.5-pro-002" data-provider="gemini">Gemini 1.5 Pro</option>
                  <option value="gemini-1.5-flash-002" data-provider="gemini">Gemini 1.5 Flash</option>
                  <option value="gemini-1.5-flash-8b" data-provider="gemini">Gemini 1.5 Flash 8B</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">Mood:</label>
                <select id="mood-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="balanced">Balanced</option>
                  <option value="happy">Happy</option>
                  <option value="sad">Sad</option>
                  <option value="energetic">Energetic</option>
                  <option value="peaceful">Peaceful</option>
                  <option value="dramatic">Dramatic</option>
                  <option value="romantic">Romantic</option>
                  <option value="mysterious">Mysterious</option>
                </select>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">Complexity:</label>
                <select id="complexity-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="simple">Simple</option>
                  <option value="moderate">Moderate</option>
                  <option value="complex">Complex</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div>
              <label class="block text-xs font-medium text-gray-700 mb-1">Style:</label>
              <select id="style-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="melodic">Melodic</option>
                <option value="rhythmic">Rhythmic</option>
                <option value="harmonic">Harmonic</option>
                <option value="ambient">Ambient</option>
              </select>
            </div>
            <div>
              <label class="block text-xs font-medium text-gray-700 mb-1">Scale:</label>
              <select id="scale-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="major">Major</option>
                <option value="minor">Minor</option>
                <option value="pentatonic">Pentatonic</option>
                <option value="chromatic">Chromatic</option>
              </select>
            </div>
            <div>
              <label class="block text-xs font-medium text-gray-700 mb-1">Tempo:</label>
              <input type="number" id="tempo-input" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="120" min="60" max="200">
            </div>
            <div>
              <label class="block text-xs font-medium text-gray-700 mb-1">Base Octave:</label>
              <input type="number" id="octave-input" class="w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500" value="4" min="2" max="6">
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label for="notation-input" class="block text-sm font-medium text-gray-700 mb-2">
            Music Notation or Text Description:
          </label>
          <textarea 
            id="notation-input" 
            placeholder="Enter music notation (e.g., 'piano:C4.1,E4.1,G4.1;') or describe your music in plain text..."
            class="w-full h-40 px-4 py-3 border border-gray-300 rounded-lg resize-y focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono text-sm leading-relaxed bg-gray-50"></textarea>
        </div>
        
        <div class="flex flex-wrap items-center gap-3 mb-6">
          <button id="play-button" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-md font-medium cursor-pointer border-0 transition-all duration-200 bg-green-500 text-white hover:bg-green-600 focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
              <path d="M8 5v10l8-5z"/>
            </svg>
            Play
          </button>
          
          <button id="stop-button" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-md font-medium cursor-pointer border-0 transition-all duration-200 bg-red-500 text-white hover:bg-red-600 focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
              <rect x="6" y="6" width="8" height="8"/>
            </svg>
            Stop
          </button>
          
          <button id="convert-text-btn" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-md font-medium cursor-pointer border-0 transition-all duration-200 bg-blue-500 text-white hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
              <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
            </svg>
            Convert Text to Music
          </button>
          
          <button id="download-btn" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-md font-medium cursor-pointer border-0 transition-all duration-200 bg-purple-500 text-white hover:bg-purple-600 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
            <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
              <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"/>
            </svg>
            Download MIDI
          </button>
        </div>

        <!-- Syntax Guide Section -->
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-gray-800 mb-4">Notation Syntax Guide:</h2>
          <div class="bg-white border border-gray-200 rounded-md p-4 overflow-x-auto">
            <pre class="text-xs text-gray-700 leading-relaxed whitespace-pre-wrap font-mono">instrument:note1.duration,note2.duration|nextMeasure;
nextInstrument:note1.duration;

Format:
- Instruments separated by semicolons (;)
- Measures separated by pipes (|)
- Notes separated by commas (,)
- Chords created by joining notes with plus (+)
- Note format: pitchOctave.duration (e.g., C4.1)
- Drum sounds: k (kick), s (snare), h (hi-hat), c (crash), t (tom), d (generic)
- Instruments: piano, bass, drums, synth, lead, brass, strings, violin, choir, etc.

Examples:
piano:C4.1+E4.1+G4.1|F4.1+A4.1+C5.1;  // C chord then F chord
bass:C2.2|G2.2;                        // Bass line
drums:k.0.5,s.0.5,k.0.5,s.0.5;         // Basic drum pattern</pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

  <script src="dist/index.js"></script>
  <script src="dist/ui.js"></script>
</body>
</html>